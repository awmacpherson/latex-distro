%
% BIBLIOGRAPHY AND CROSS-REFERENCING
%
% v2.0.0
%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mac-xref}

\RequirePackage{mac-util}

\pgfkeys{biblatex/backend/.code={\PassOptionsToPackage{backend=#1}{biblatex}}}
\pgfkeys{biblatex/backend=biber}
\ProcessPGFOptions

\RequirePackage[style=alphabetic]{biblatex}
\setcounter{biburllcpenalty}{1}   % freely break URLs at lowercase

% use \addbibresource to register .bib databases

% Legacy syntax (LaTeX): place
%
% \bibliography{<bibpath>}
% \bibliographystyle{alpha}
%
% where you wish the bibliography to appear. Generates a list environment.

% About backends:
% bibtex reads both the .aux file and .bib file.
% biber reads ONLY the .bcf file which is generated by biblatex 
% when backend=biber.
%
% About biblatex:
% loads etoolbox
% Use \nopp to suppress p. pp. in postnote. 
% Alternatively, change pagination field in bib entry.
% For arXiv compatibility require versions:
%  .bbl format 2.8 biblatex 3.7 Biber 2.7
%  (as of May 2020, arXiv uses TeXLive 2016)


%
%%% CROSS REFERENCING %%%%%%%%%%%%%%%%%%%%%%
%

% These packages must be loaded after amsmath because the latter redefines
% the \label command for equation numbering.

% TO DO: consider using zref
% OR a key-value system like pgfkeys or L3 keys for hierarchical labels

\RequirePackage{xr-hyper}    % LOAD BEFORE HYPERREF

% Provides \externaldocument[cite_prefix]{path}.

% This is the tool to make documents interdependent.
% It is used by stacksproject.

\RequirePackage{hyperref}

% Turns cross-references into links by redefining \refstepcounter
% Turns citations into links by redefinint \bibcite
% Turns amsmath equation numbers into links by unknown wizardry
% Provides \href{}{}

% TO DO: use colorlinks=true with xcolor (or with package default hycolor)
% Which commands does this redefine?


\RequirePackage{showlabels}
% patches \label and possibly \cite command